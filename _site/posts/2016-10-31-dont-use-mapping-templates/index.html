<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <title>Don't use API Gateway mapping templates</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content="Don't use API Gateway mapping templates">
    <meta property="og:type" content="">
    <meta property="og:url" content="https://jw5.dev">
    <meta property="og:image" content="">

    <link rel="manifest" href="site.webmanifest">
    <link rel="apple-touch-icon" href="/img/favicon.ico">
    <link rel="shortcut icon" type="image/jpg" href="/img/favicon.ico"/>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300&display=swap" rel="stylesheet">

    <!-- Prism Syntax Highlighting -->
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">

    <!-- Tachyons-->
    <link rel="stylesheet" href="https://unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Local styles-->
    <link rel="stylesheet" href="/styles/main.css">

    <meta name="theme-color" content="#fafafa">
    </head>

    <body>
      <div class="mw7 mw7-ns center pa3 ph5-ns" >
        <a href="/" class="flex items-center bb no-underline black">
            <img class="" src="/img/waveemoji.svg" width="50" height="50" />
            <h1 class="ml4">I'm Jerry Wohlgemuth.</h1>
        </a>

        <div class="flex pa3 justify-center">
            <div><a href="/about">about me</a></div>
            <div class="ml4"><a href="mailto:wohlgejm@gmail.com">email</div>
            <div class="ml4"><a href="https://www.linkedin.com/in/wohlgejm" target="_blank">linkedin</a></div>
        </div>
        <main>
    <p>I've been using AWS's API Gateway for around a year and can't agree more with Thoughtwork's assessment of
<a href="https://www.thoughtworks.com/radar/platforms/over-ambitious-api-gateways">Over Ambitious API Gateways</a>.</p>
<p>AWS's allows you to transform the incoming request and subsequent response with what it calls &quot;mapping templates.&quot;
These mapping templates are written in <a href="https://velocity.apache.org/engine/1.7/vtl-reference.html">Velocity Template Language</a>.</p>
<p>Once you have a mapping template that details all the fields you expect in the request payload, you have to
update it <strong>any time you want to add another field</strong>. I seem to always forget this part and you end up
having expected fields duplicated in your code bases. API Gateway should be as dumb as possible and just
pass on the payload it receives. Let it stick to its concerns - rate limiting and checking API keys.</p>
<p>I've also encountered weird issues with escaping around backslashes in templates. It's unclear WTF is going on,
but I'll report back when the issue is solved.</p>

</main>

      </div>
    </body>
</html>
