<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <title>Hacking multi-line tooltips in Chart.js</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content="Hacking multi-line tooltips in Chart.js">
    <meta property="og:type" content="">
    <meta property="og:url" content="https://jw5.dev">
    <meta property="og:image" content="">

    <link rel="apple-touch-icon" href="/img/favicon.ico">
    <link rel="shortcut icon" type="image/jpg" href="/img/favicon.ico"/>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300&display=swap" rel="stylesheet">

    <!-- Prism Syntax Highlighting -->
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">

    <!-- Tachyons-->
    <link rel="stylesheet" href="https://unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Local styles-->
    <link rel="stylesheet" href="/styles/main.css">

    <meta name="theme-color" content="#fafafa">
    </head>

    <body>
      <div class="mw7 mw7-ns center pa3 ph5-ns" >
        <a href="/" class="flex items-center bb no-underline black">
            <img src="/img/waveemoji.svg" alt="Wave" width="50" height="50" />
            <h1 class="ml4">I'm Jerry Wohlgemuth.</h1>
        </a>

        <div class="flex pa3 justify-center">
            <div><a href="/about">about me</a></div>
            <div class="ml4"><a href="mailto:wohlgejm@gmail.com">email</a></div>
            <div class="ml4"><a href="https://www.linkedin.com/in/wohlgejm" rel="noreferrer" target="_blank">linkedin</a></div>
        </div>
        <p><a href="http://www.chartjs.org/">Chart.js</a> is an awesome javascript library with an API that can handle almost any
requirements. However, because Chart.js uses canvas to draw the charts, the tooltips can be frustrating.
The tooltips cannot render outside of the canvas and if you have very long data, this can cause the tooltip
on the chart to become useless.</p>
<p>Here is a very hacky workaround for putting in line breaks in your tooltips. Chart.js does not supporting
rendering html inside the tooltip, so it's not as easy as throwing in a <code>&lt;br&gt;</code>. This code will place the first line as
the <code>label</code> and subsequent lines as the <code>afterLabel</code> option. <code>afterLabel</code> accepts an array of strings, which
it will break onto new lines.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> maxTooltipLength <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> <span class="token function-variable function">wordsToArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">words</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>   <span class="token keyword">let</span> lines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>   <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>   words<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">+</span> word<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> maxTooltipLength<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>       str <span class="token operator">+=</span> word <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">;</span><br>     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>       lines<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><br>       str <span class="token operator">=</span> word <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">;</span><br>     <span class="token punctuation">}</span><br>   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>   lines<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><br>   <span class="token keyword">return</span> lines<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> breakLabels <span class="token operator">=</span> <span class="token function">fucntion</span><span class="token punctuation">(</span><span class="token parameter">tooltipItems<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>   <span class="token keyword">let</span> label <span class="token operator">=</span> data<span class="token punctuation">.</span>labels<span class="token punctuation">[</span>tooltipItems<span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span><br>   <span class="token keyword">if</span> <span class="token punctuation">(</span>label<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> maxTooltipLength<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">[</span> label <span class="token punctuation">]</span> <span class="token punctuation">}</span><br>   <span class="token keyword">let</span> words <span class="token operator">=</span> label<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>   <span class="token keyword">return</span> <span class="token function">wordsToArray</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> <span class="token function-variable function">firstLabel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tooltipItems<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token function">breakLabels</span><span class="token punctuation">(</span>tooltipItems<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> <span class="token function-variable function">otherLabels</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tooltipItems<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token function">breakLabels</span><span class="token punctuation">(</span>tooltipItems<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>  tooltips<span class="token operator">:</span> <span class="token punctuation">{</span><br>    callbacks<span class="token operator">:</span> <span class="token punctuation">{</span><br>      label<span class="token operator">:</span> <span class="token function">firstLabel</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      afterLabel<span class="token operator">:</span> <span class="token function">otherLabels</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Binding the callback is necessary otherwise, <code>this</code> will the <code>Chart</code> instance.</p>

      </div>
    </body>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CY25JVKR0D"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-CY25JVKR0D');
    </script>
</html>
